<p>#include &lt;stdio.h&gt; <br />#include &lt;fcntl.h&gt; <br />#include &lt;unistd.h&gt; <br /> <br />#define MAXPERS 3 <br />#define TAILLE_NOM 15 <br />#define TAILLE_ADRESSE 25 <br /> <br />struct personne { <br /> char nom[TAILLE_NOM]; <br /> int age; <br /> char adresse[TAILLE_ADRESSE]; <br />}; <br /> <br />typedef struct personne Personne; <br /> <br />/* saisie des informations pour les MAXPERS personnes */ <br />void saisiePersonnes(Personne *p) { <br /> <br />} <br /> <br />/* sauvegarde des informations saisies dans le fichier &quot;personne.data&quot; */ <br />void sauvegardePersonnes(Personne *p){ <br /> <br />} <br /> <br />/* lecture du fichier &quot;personne.data&quot; entier */ <br />void lecturePersonnes(Personne *p){ <br /> int f; <br /> f=open(&quot;personne.data&quot;,O_RDONLY); <br /> read (f, p, MAXPERS*sizeof(Personne)); <br /> close (f); <br /> <br /> for (i=0; i&lt;MAXPERS; i++) { <br /> printf (&quot;Personne %d:\n\tNom: %s\n\tAge: %d\n\tAdresse: %s\n&quot;,i, p[i].nom, p[i].age, p[i].adresse); <br /> } <br />} <br /> <br />/* lecture d'un enregistrement particulier (num) du fichier &quot;personne.data&quot; */ <br />void lireUnePersonne(Personne *p,int num){ <br /> <br />} <br /> <br />/* fonctionnement du programme : <br /> * - s'il n'y a pas d'arguments, le programme saisi les personnes et les sauvegarde <br /> * dans le fichier avant de se terminer ; <br /> * - si l'argument est 'a', le programme lit le fichier des personnes, l'affiche et se <br /> * termine ; si le fichier &quot;personne.data&quot; n'existe pas, afficher un message d'erreur ; <br /> * - si l'argument est un chiffre entre 0 et MAXPERS, lire l'enregistrement correspondant <br /> * et l'afficher, sinon erreur. <br /> */ <br /> <br />int main(int argc, char *argv[]) { <br /> Personne pers[MAXPERS]; <br /> int i; <br /> <br /> if(argc == 1) { /* pas d'arguments */ <br /> saisiePersonnes (pers); <br /> sauvegardePersonnes (pers); <br /> } <br /> else if(strcmp(argv[1],&quot;a&quot;) == 0) { <br /> lecturePersonnes (pers); <br /> } <br /> else { <br /> lireUnePersonne (pers, atoi(argv[1])); <br /> } <br /> return 0; <br />}</p>
